<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Duty Manager</title>
  <style>
    /* Root Variables for Themes */
    :root {
      --bg-color: #000000;
      --text-color: #ffffff;
      --container-bg: rgba(255, 255, 255, 0.1);
      --button-bg: linear-gradient(135deg, #ff9966, #ff5e62); /* Default Orange-Red */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Arial', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      padding: 10px;
      overflow-x: hidden;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: var(--container-bg);
      backdrop-filter: blur(10px);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(255, 255, 255, 0.2);
      animation: fadeIn 1s ease-in-out;
    }
    .logo {
      text-align: center;
      margin-bottom: 20px;
      font-family: 'Arial Black', sans-serif;
      font-size: 1.5rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .logo span {
      font-size: 2rem;
      font-weight: bold;
      color: #ff9966;
    }
    h3 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.2rem;
      letter-spacing: 1px;
      font-weight: bold;
      animation: slideIn 1s ease-in-out;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    form label {
      font-weight: bold;
      color: var(--text-color);
    }
    form input, form select, form button {
      padding: 10px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.2);
      color: var(--text-color);
      transition: all 0.3s ease;
    }
    form input:focus, form select:focus {
      background: rgba(255, 255, 255, 0.4);
      outline: none;
    }
    form button {
      background: var(--button-bg);
      color: white;
      cursor: pointer;
      border: none;
      font-weight: bold;
      animation: pulse 1.5s infinite;
    }
    form button:hover {
      transform: scale(1.05);
    }
    .tab-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .tab-button {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.2);
      color: var(--text-color);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .tab-button.active {
      background: var(--button-bg);
      color: white;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: var(--container-bg);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(255, 255, 255, 0.2);
    }
    table th, table td {
      padding: 12px;
      text-align: left;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    table th {
      background: rgba(255, 255, 255, 0.1);
      font-weight: bold;
    }
    table td {
      color: var(--text-color);
    }
    .shutty-row {
      background-color: #ff4d4d !important;
      color: white !important;
    }
    .summary {
      margin-top: 20px;
      padding: 15px;
      background: var(--container-bg);
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(255, 255, 255, 0.2);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .summary div {
      display: flex;
      justify-content: space-between;
      font-size: 1rem;
      font-weight: bold;
    }

    /* Custom Button Colors */
    .delete-all-btn {
      background: linear-gradient(135deg, #ff5e62, #ff0000) !important;
    }
    .download-pdf-btn {
      background: linear-gradient(135deg, #39e600, #1f8c00) !important;
    }
    .summary-btn {
      background: linear-gradient(135deg, #6a11cb, #2575fc) !important; /* Light Blue */
    }

    /* Common Button Styling */
    .uniform-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-weight: bold;
      animation: pulse 1.5s infinite;
      transition: transform 0.3s ease;
    }
    .uniform-btn:hover {
      transform: scale(1.05);
    }

    @media (max-width: 600px) {
      body {
        padding: 5px;
      }
      .container {
        padding: 10px;
      }
      form input, form select, form button {
        font-size: 14px;
      }
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideIn {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Logo -->
    <div class="logo">
      <span>ðŸ“‹</span> Duty Manager
    </div>

    <!-- Tab Buttons -->
    <div class="tab-buttons">
      <button class="tab-button active" onclick="switchTab('add-duty')">Add Duty</button>
      <button class="tab-button" onclick="switchTab('view-data')" id="viewDataTab">View Monthly Data</button>
    </div>

    <!-- Add Duty Tab -->
    <div id="add-duty" class="tab-content active">
      <!-- Payment Rate Settings -->
      <form id="rateForm">
        <h3>Set Your Payment Rates</h3>
        <label for="regularRate">Regular Rate (â‚¹/hour):</label>
        <input type="number" step="any" id="regularRate" placeholder="e.g., 50.23" required>
        <label for="otRate">OT Rate (â‚¹/hour):</label>
        <input type="number" step="any" id="otRate" placeholder="e.g., 75.50" required>
        <button type="submit" class="uniform-btn">Save Rates</button>
      </form>

      <!-- Form to Add Duty -->
      <form id="dutyForm">
        <h3>Add Duty</h3>
        <label for="date">Date:</label>
        <input type="date" id="date" required>
        <label for="shift">Shift:</label>
        <select id="shift" required>
          <option value="Fast">Fast</option>
          <option value="Second">Second</option>
          <option value="Night'">Night'</option>
          <option value="Off Day">Off Day</option>
        </select>
        <label for="hours">Hours Worked:</label>
        <input type="number" step="any" id="hours" placeholder="e.g., 8.5">
        <label for="otHours">OT Hours (Optional):</label>
        <input type="number" step="any" id="otHours" placeholder="e.g., 2.25">
        <button type="submit" class="uniform-btn">Add Duty</button>
      </form>
    </div>

    <!-- View Monthly Data Tab -->
    <div id="view-data" class="tab-content">
      <h3>Monthly Data</h3>
      <table id="monthlyDataTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Shift</th>
            <th>Hours Worked</th>
            <th>OT Hours</th>
          </tr>
        </thead>
        <tbody>
          <!-- Data will be dynamically inserted here -->
        </tbody>
      </table>

      <!-- Show Summary Button (Blue) -->
      <button class="uniform-btn summary-btn" onclick="toggleSummary()" style="margin: 20px auto;">Show Summary</button>

      <!-- Summary Section -->
      <div class="summary summary-section" id="summarySection" style="display: none;">
        <h4>Summary</h4>
        <div>
          <span>Total Hours Worked:</span>
          <span id="totalHoursWorked">0.00 hours</span>
        </div>
        <div>
          <span>Total OT Hours:</span>
          <span id="totalOTHrs">0.00 hours</span>
        </div>
        <div>
          <span>Total Regular Payment:</span>
          <span id="totalRegularPayment">â‚¹0.00</span>
        </div>
        <div>
          <span>Total OT Payment:</span>
          <span id="totalOTPayment">â‚¹0.00</span>
        </div>
        <div>
          <span>Total Payment:</span>
          <span id="totalPayment">â‚¹0.00</span>
        </div>
      </div>

      <!-- Action Buttons at Bottom -->
      <div style="display: flex; justify-content: space-between; margin-top: 20px;">
        <button class="uniform-btn delete-all-btn" onclick="deleteAllData()">Delete All Data</button>
        <button class="uniform-btn download-pdf-btn" onclick="downloadPDF()">Download PDF</button>
      </div>
    </div>
  </div>

  <!-- Include jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // Initialize jsPDF
    const { jsPDF } = window.jspdf;

    document.addEventListener("DOMContentLoaded", () => {
      const rateForm = document.getElementById("rateForm");
      const dutyForm = document.getElementById("dutyForm");
      let duties = JSON.parse(localStorage.getItem("duties")) || [];
      let rates = JSON.parse(localStorage.getItem("rates")) || { regularRate: 500, otRate: 700 };
      const viewDataTab = document.getElementById("viewDataTab");

      // Check if duties exist to enable View Data tab
      viewDataTab.disabled = duties.length === 0;

      // Display saved rates
      document.getElementById("regularRate").value = rates.regularRate;
      document.getElementById("otRate").value = rates.otRate;

      // Save rates to local storage
      rateForm.addEventListener("submit", (e) => {
        e.preventDefault();
        rates.regularRate = parseFloat(document.getElementById("regularRate").value) || 500;
        rates.otRate = parseFloat(document.getElementById("otRate").value) || 700;
        localStorage.setItem("rates", JSON.stringify(rates));
        alert("Rates saved successfully!");
      });

      // Save duties to local storage
      function saveDutiesToLocalStorage() {
        localStorage.setItem("duties", JSON.stringify(duties));
      }

      // Handle duty form submission
      dutyForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const date = document.getElementById("date").value;
        const shift = document.getElementById("shift").value;
        const hours = parseFloat(document.getElementById("hours").value) || 0;
        const otHours = parseFloat(document.getElementById("otHours").value) || 0;

        if (shift === "Off Day" || hours > 0 || otHours > 0) {
          duties.push({ date, shift, hours, otHours });
          saveDutiesToLocalStorage();
          dutyForm.reset();
          alert("Duty added successfully!");
          viewDataTab.disabled = false;
          switchTab("view-data");
          renderMonthlyData();
        } else {
          alert("Please enter valid hours or select 'Off Day'.");
        }
      });

      // Render monthly data in the table
      function renderMonthlyData() {
        const tableBody = document.querySelector("#monthlyDataTable tbody");
        tableBody.innerHTML = "";

        let totalRegularPayment = 0;
        let totalOTPayment = 0;
        let totalHoursWorked = 0;
        let totalOTHrs = 0;

        duties.forEach((duty) => {
          const regularPayment = duty.hours * rates.regularRate;
          const otPayment = duty.otHours * rates.otRate;

          totalRegularPayment += regularPayment;
          totalOTPayment += otPayment;
          totalHoursWorked += duty.hours;
          totalOTHrs += duty.otHours;

          const row = document.createElement("tr");
          if (duty.shift === "Off Day") row.classList.add("shutty-row");

          row.innerHTML = `
            <td>${duty.date}</td>
            <td>${duty.shift}</td>
            <td>${duty.hours.toFixed(2)}</td>
            <td>${duty.otHours.toFixed(2)}</td>
          `;
          tableBody.appendChild(row);
        });

        document.getElementById("totalHoursWorked").textContent = `${totalHoursWorked.toFixed(2)} hours`;
        document.getElementById("totalOTHrs").textContent = `${totalOTHrs.toFixed(2)} hours`;
        document.getElementById("totalRegularPayment").textContent = `â‚¹${totalRegularPayment.toFixed(2)}`;
        document.getElementById("totalOTPayment").textContent = `â‚¹${totalOTPayment.toFixed(2)}`;
        document.getElementById("totalPayment").textContent = `â‚¹${(totalRegularPayment + totalOTPayment).toFixed(2)}`;
      }

      // Initial render
      renderMonthlyData();

      // Toggle Summary Visibility
      window.toggleSummary = function () {
        const summarySection = document.getElementById("summarySection");
        const showSummaryBtn = document.querySelector(".summary-btn");

        if (summarySection.style.display === "none" || summarySection.style.display === "") {
          summarySection.style.display = "block";
          showSummaryBtn.textContent = "Hide Summary";
        } else {
          summarySection.style.display = "none";
          showSummaryBtn.textContent = "Show Summary";
        }
      };

      // Delete All Data Functionality
      window.deleteAllData = function () {
        if (confirm("Are you sure you want to delete all data?")) {
          localStorage.removeItem("duties");
          localStorage.removeItem("rates");
          duties = [];
          rates = { regularRate: 500, otRate: 700 };
          document.getElementById("regularRate").value = 500;
          document.getElementById("otRate").value = 700;
          viewDataTab.disabled = true;
          renderMonthlyData();
          alert("All data deleted!");
        }
      };

      // Download PDF Functionality
      window.downloadPDF = function () {
        const doc = new jsPDF();

        doc.setFontSize(18);
        doc.text("Duty Manager Report", 10, 10);

        let startY = 20;
        doc.setFontSize(12);
        doc.text("Date", 10, startY);
        doc.text("Shift", 40, startY);
        doc.text("Hours Worked", 70, startY);
        doc.text("OT Hours", 100, startY);

        duties.forEach((duty) => {
          startY += 10;
          doc.text(duty.date, 10, startY);
          doc.text(duty.shift, 40, startY);
          doc.text(duty.hours.toFixed(2), 70, startY);
          doc.text(duty.otHours.toFixed(2), 100, startY);
        });

        startY += 20;
        doc.setFontSize(14);
        doc.text("Summary", 10, startY);
        startY += 10;
        doc.setFontSize(12);
        doc.text(`Total Hours: ${document.getElementById("totalHoursWorked").textContent}`, 10, startY);
        startY += 10;
        doc.text(`Total OT Hours: ${document.getElementById("totalOTHrs").textContent}`, 10, startY);
        startY += 10;
        doc.text(`Total Regular Pay: ${document.getElementById("totalRegularPayment").textContent}`, 10, startY);
        startY += 10;
        doc.text(`Total OT Pay: ${document.getElementById("totalOTPayment").textContent}`, 10, startY);
        startY += 10;
        doc.text(`Total Payment: ${document.getElementById("totalPayment").textContent}`, 10, startY);

        doc.save("DutyManagerReport.pdf");
      };

      // Switch Tabs Functionality
      window.switchTab = function (tabId) {
        if (tabId === "view-data" && duties.length === 0) {
          alert("No data available!");
          return;
        }

        document.querySelectorAll(".tab-content").forEach(tab => {
          tab.classList.remove("active");
        });
        document.getElementById(tabId).classList.add("active");

        document.querySelectorAll(".tab-button").forEach(button => {
          button.classList.remove("active");
        });
        document.querySelector(`.tab-button[onclick="switchTab('${tabId}')"]`).classList.add("active");
      };
    });
  </script>
</body>
</html>
